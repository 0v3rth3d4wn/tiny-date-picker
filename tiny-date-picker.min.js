!function(t){"use strict";function e(t,e){this.input=t,this.calendar=void 0,this.opts=n(e),this.input.readOnly=!0,u(t,"focus",this.show.bind(this)),u(t,"click",this.show.bind(this))}function n(t){return c({format:function(t){return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()},parse:function(t){var e=new Date(t);return isNaN(e)?new Date:e},days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",clear:"Clear",close:"Close"},t)}function a(t){var e=t.opts,n=document.createElement("div");return n.innerHTML='<div class="dp-wrapper"><div class="dp"><header class="dp-header"><button class="dp-prev"></button><span class="dp-month-year"><span class="dp-month">'+e.months[t.date.getMonth()]+'</span><span class="dp-year">'+t.date.getFullYear()+'</span></span><button class="dp-next"></button></header><div class="dp-body">'+i(t)+s(t)+'</div><footer class="dp-footer"><button class="dp-today">'+e.today+'</button><button class="dp-clear">'+e.clear+'</button><button class="dp-close">'+e.close+"</button></footer></div></div>",n.firstChild}function i(t){for(var e="",n=0;7>n;++n)e+='<span class="dp-day-of-week">'+t.opts.days[n]+"</span>";return e}function s(t){for(var e=p(t.date),n="",a=0;42>a;++a){var i=e.getDate(),s="dp-day",o=e.toDateString()==t.date.toDateString(),r=e.toDateString()===(new Date).toDateString(),d=e.getMonth()!==t.date.getMonth(),c=o?"a":"span";o&&(s+=" dp-selected"),d&&(s+=" dp-edge-day"),r&&(s+=" dp-day-today"),n+="<"+c+' href="#" class="'+s+'" data-dp="'+e.getTime()+'">'+i+"</"+c+">",e.setDate(i+1)}return n}function o(t){var e=t.calendar,n=["A","BUTTON"],a={"dp-clear":function(){t.pickDate()},"dp-close":t.hide.bind(t),"dp-wrapper":t.hide.bind(t),"dp-prev":l.bind(0,t,-1),"dp-next":l.bind(0,t,1),"dp-today":function(){t.pickDate(new Date)},"dp-day":function(e){var n=e.target.getAttribute("data-dp");n&&t.pickDate(new Date(parseInt(n)))}};u(e,"click",function(t){t.target.className.split(/[\s]+/g).forEach(function(e){a[e]&&a[e](t)})}),u(e,"mousedown",function(t){~n.indexOf(t.target.tagName)||t.preventDefault()}),u(e,"blur",function(n){setTimeout(function(){e.contains(document.activeElement)||t.hide()},1)})}function r(t){function e(e){t.date=new Date(t.date.setDate(t.date.getDate()+e))}var n={37:function(){e(-1)},38:function(){e(-7)},39:function(){e(1)},40:function(){e(7)},13:function(){t.pickDate(t.date)}};u(t.calendar,"keydown",function(t){var e=n[t.which];e&&/dp-selected/.test(t.target.className)&&(t.preventDefault(),e())})}function d(t){t.input.parentNode.insertBefore(t.calendar,t.input),setTimeout(function(){t.calendar.className+=" dp-visible",t.focus()},1)}function c(t){for(var e=1;e<arguments.length;++e){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function u(t,e,n){t.addEventListener(e,n,!0)}function p(t){var e=new Date(t);return e.setDate(1),e.setDate(e.getDate()-e.getDay()),e}function l(t,e){var n=t.date,a=new Date(n);a.setDate(1),e>0&&a.setMonth(a.getMonth()+2),a.setDate(a.getDate()-1),n.getDate()<a.getDate()&&a.setDate(n.getDate()),t.date=a}e.prototype={get date(){return this._currentDate},set date(t){this._currentDate=t,this.calendar.innerHTML=a(this).innerHTML,this.focus()},show:function(){this.calendar||this.hiding||(this._currentDate=this.opts.parse(this.input.value),this.calendar=a(this),o(this),r(this),d(this))},hide:function(){var t=this;t.calendar&&(t.hiding=1,t.input.focus(),t.input.selectionEnd=t.input.selectionStart,t.calendar.parentNode.removeChild(t.calendar),t.calendar=void 0,setTimeout(function(){t.hiding=0},1))},focus:function(){this.calendar.querySelector(".dp-selected").focus()},pickDate:function(t){t?(this.date=t,this.input.value=this.opts.format(t)):this.input.value="",this.hide()}};var f=t.define;f&&f.amd?f([],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.TinyDatePicker=e}(this);
//# sourceMappingURL=tiny-date-picker.min.js.map