!function(t){"use strict";function e(t,e){this.input=t,this.calendar=void 0,this.opts=n(e),this._currentDate=this.opts.parse(t.value),this.input.readOnly=!0,p(t,"focus",this.show.bind(this)),p(t,"click",this.show.bind(this))}function n(t){return u({format:function(t){return t.toLocaleDateString()},parse:function(t){var e=new Date(t);return isNaN(e)?new Date:e},getMonthName:function(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"];return e[t]},getDayName:function(t){var e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e[t]},today:"Today",clear:"Clear",close:"Close"},t)}function a(t){var e=t.opts,n=document.createElement("div");return n.innerHTML='<div class="dp-wrapper"><div class="dp"><header class="dp-header"><button class="dp-prev"></button><span class="dp-month-year"><span class="dp-month">'+e.getMonthName(t.date.getMonth())+'</span><span class="dp-year">'+t.date.getFullYear()+'</span></span><button class="dp-next"></button></header><div class="dp-body">'+i(t)+r(t)+'</div><footer class="dp-footer"><button class="dp-today">'+e.today+'</button><button class="dp-clear">'+e.clear+'</button><button class="dp-close">'+e.close+"</button></footer></div></div>",n.firstChild}function i(t){for(var e="",n=0;7>n;++n)e+='<span class="dp-day-of-week">'+t.opts.getDayName(n)+"</span>";return e}function r(t){for(var e=l(t.date),n="",a=0;42>a;++a){var i=e.getDate(),r="dp-day",s=e.toDateString()==t.date.toDateString(),o=e.getMonth()!==t.date.getMonth(),c=s?"a":"span";s&&(r+=" dp-selected"),o&&(r+=" dp-edge-day"),n+="<"+c+' href="#" class="'+r+'" data-dp="'+e.getTime()+'">'+i+"</"+c+">",e.setDate(i+1)}return n}function s(t){var e=t.calendar;p(e,"blur",function(){setTimeout(function(){e&&!e.contains(document.activeElement)&&t.hide()},1)})}function o(t){var e=t.calendar,n={"dp-clear":function(){t.pickDate()},"dp-close":t.hide.bind(t),"dp-wrapper":t.hide.bind(t),"dp-prev":f.bind(0,t,-1),"dp-next":f.bind(0,t,1),"dp-today":function(){t.pickDate(new Date)},"dp-day":function(e){var n=e.target.getAttribute("data-dp");n&&t.pickDate(new Date(parseInt(n)))}};p(e,"click",function(t){t.target.className.split(/[\s]+/g).forEach(function(e){n[e]&&n[e](t)})}),p(e,"mousedown",function(t){t.preventDefault(),focus()})}function c(t){function e(e){t.date=new Date(t.date.setDate(t.date.getDate()+e))}var n={37:function(){e(-1)},38:function(){e(-7)},39:function(){e(1)},40:function(){e(7)},13:function(){t.pickDate(t.date)}};p(t.calendar,"keydown",function(t){var e=n[t.which];e&&/dp-selected/.test(t.target.className)&&(t.preventDefault(),e())})}function d(t){t.input.parentNode.insertBefore(t.calendar,t.input),setTimeout(function(){t.calendar.className+=" dp-visible",t.focus()},1)}function u(t){for(var e=1;e<arguments.length;++e){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function p(t,e,n){t.addEventListener(e,n,!0)}function l(t){var e=new Date(t);return e.setDate(1),e.setDate(e.getDate()-e.getDay()),e}function f(t,e){var n=t.date,a=new Date(n);a.setDate(1),e>0&&a.setMonth(a.getMonth()+2),a.setDate(a.getDate()-1),n.getDate()<a.getDate()&&a.setDate(n.getDate()),t.date=a}e.prototype={get date(){return this._currentDate},set date(t){this._currentDate=t,this.calendar.innerHTML=a(this).innerHTML,this.focus()},show:function(){this.calendar||(this.calendar=a(this),o(this),c(this),s(this),d(this))},hide:function(){this.calendar&&(this.input.focus(),this.input.selectionEnd=this.input.selectionStart,this.calendar.parentNode.removeChild(this.calendar),this.calendar=void 0)},focus:function(){this.calendar.querySelector(".dp-selected").focus()},pickDate:function(t){t?(this.date=t,this.input.value=this.opts.format(t)):this.input.value="",this.hide()}};var h=t.define;h&&h.amd?h([],function(){return DatePicker}):"undefined"!=typeof module&&module.exports?module.exports=DatePicker:t.DatePicker=DatePicker}(this);
//# sourceMappingURL=tiny-date-picker.min.js.map