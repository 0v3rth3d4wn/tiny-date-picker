<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Tiny Date Picker Demo</title>
    <meta name="author" content="Chris Davies - http://chrisdavies.github.io/">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="A tiny, responsive, modern, zero-dependency date picker">
    <link rel="stylesheet" href="./dist/tiny-date-picker.css">
    <link rel="stylesheet" href="./dist/date-range-picker.css">
    <link rel="stylesheet" href="./demo/demo.css">
  </head>
  <body>
    <main>
      <header class="page-header">
        <h1 class="page-title">Tiny Date Picker</h1>
        <nav class="nav-links">
          <a href="https://github.com/chrisdavies/tiny-date-picker">Get it at GitHub</a>
        </nav>
      </header>
      <div class="demo-content">
        <div class="form-group">
          <div class="form-field">
            <label class="form-field-label">Example Modal</label>
            <input type="text" class="date-example" tabindex="400" />
          </div>
          <div class="form-field">
            <label class="form-field-label">Example Below</label>
            <input type="text" class="date-example is-below" tabindex="401" />
          </div>
          <div class="form-field">
            To play around with the date pickers, open up your browser's developer console and play with
            <span class="code-sample">dpModal</span>,
            <span class="code-sample">dpBelow</span>,
            or <span class="code-sample">dpPermanent</span>.
            For example, try running <span class="code-sample">dpBelow.open()</span> and see what happens.
          </div>
        </div>
        <div class="form-group">
          <label class="form-field-label">This shows a permanent calendar</label>
          <div class="permanent-cal-container"></div>
        </div>

        <script src="./dist/date-range-picker.js"></script>
        <script>
          var TinyDatePicker = DateRangePicker.TinyDatePicker;
          var dpModal = TinyDatePicker('.date-example');

          var dpBelow = TinyDatePicker('.is-below', {
            mode: 'dp-below',
          });

          var dpPermanent = TinyDatePicker('.permanent-cal-container', {
            mode: 'dp-permanent',
          });
        </script>
      </div>
      <!--
        Here's an example of how you might consume DateRangePicker
      -->
      <div class="date-range-examples">
        <div class="ex-inputs">
          <header class="ex-inputs-header">
            <h1>
              Date Range Picker Demo
            </h1>
            <input class="ex-inputs-start" placeholder="From date" />
            -
            <input class="ex-inputs-end" placeholder="To date" />
          </header>
          <div class="ex-inputs-picker"></div>
          <script>
            (function () {
              const root = document.querySelector('.ex-inputs');
              const txtStart = root.querySelector('.ex-inputs-start');
              const txtEnd = root.querySelector('.ex-inputs-end');
              const container = root.querySelector('.ex-inputs-picker');

              // Inject DateRangePicker into our container
              DateRangePicker.DateRangePicker(container)
                .on('statechange', function (_, rp) {
                  // Update the inputs when the state changes
                  var range = rp.state;
                  txtStart.value = range.start ? range.start.toDateString() : '';
                  txtEnd.value = range.end ? range.end.toDateString() : '';
                });

              // When the inputs gain focus, show the date range picker
              txtStart.addEventListener('focus', showPicker);
              txtEnd.addEventListener('focus', showPicker);

              function showPicker() {
                container.classList.add('ex-inputs-picker-visible');
              }

              // If focus leaves the root element, it is not in the date
              // picker or the inputs, so we should hide the date picker
              // we do this in a setTimeout because redraws cause temporary
              // loss of focus.
              let previousTimeout;
              root.addEventListener('focusout', function hidePicker() {
                clearTimeout(previousTimeout);
                previousTimeout = setTimeout(function() {
                  if (!root.contains(document.activeElement)) {
                    container.classList.remove('ex-inputs-picker-visible');
                  }
                }, 10);
              });

            }());
          </script>
        </div>
      </div>
    </main>


  </body>
</html>
